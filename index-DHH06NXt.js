(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))f(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const u of n.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&f(u)}).observe(document,{childList:!0,subtree:!0});function h(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function f(t){if(t.ep)return;t.ep=!0;const n=h(t);fetch(t.href,n)}})();window.addEventListener("DOMContentLoaded",async()=>{if(typeof Lenis>"u"){console.error("❌ Lenis is not defined. Please check your Lenis CDN script tag.");return}if(typeof ogl>"u"){console.error("❌ ogl is not defined. Please check your ogl CDN script tag.");return}const{Renderer:x,Vec2:d,Vec4:h,Geometry:f,Texture:t,Program:n,Mesh:u,Flowmap:M}=ogl,R=new Lenis;function A(o){R.raf(o),requestAnimationFrame(A)}requestAnimationFrame(A);async function F(o){return(await fetch(o)).text()}const D=await F("https://raw.githubusercontent.com/Nazanin-Shahrad/flowpartyproject/main/shaders/vertexShader.glsl"),E=await F("https://raw.githubusercontent.com/Nazanin-Shahrad/flowpartyproject/main/shaders/fragmentShader.glsl"),S=document.querySelectorAll(".img");if(!S.length){console.warn("⚠️ No .img elements found.");return}S.forEach(o=>{const p=new x({dpr:2}),r=p.gl,I=document.createElement("canvas");o.appendChild(I),o.appendChild(r.canvas);const U=new f(r,{position:{size:2,data:new Float32Array([-1,-1,3,-1,-1,3])},uv:{size:2,data:new Float32Array([0,0,2,0,0,2])}}),N=new t(r,{minFilter:r.LINEAR,magFilter:r.LINEAR}),l=o.querySelector("img");l.crossOrigin="anonymous",l.onload=()=>{const T=[l.naturalWidth,l.naturalHeight];N.image=l;const m=new M(r,{falloff:.3,dissipation:.92,alpha:.5}),C=new n(r,{vertex:D,fragment:E,uniforms:{uTime:{value:0},tWater:{value:N},res:{value:new h(window.innerWidth,window.innerHeight,1,1)},tFlow:m.uniform}}),z=new u(r,{geometry:U,program:C});function O(){const e=o.getBoundingClientRect();r.canvas.width=e.width*2,r.canvas.height=e.height*2,r.canvas.style.width=`${e.width}px`,r.canvas.style.height=`${e.height}px`;const s=T[0]/T[1],a=e.width/e.height;let i=1,y=1;a>s?i=s/a:y=a/s,z.program.uniforms.res.value=new h(e.width,e.height,i,y),p.setSize(e.width,e.height)}window.addEventListener("resize",O,!1),O();const v=new d(-1),c=new d,g=new d;let w;"ontouchstart"in window?(o.addEventListener("touchstart",L,!1),o.addEventListener("touchmove",L,{passive:!1})):o.addEventListener("mousemove",L,!1);function L(e){e.preventDefault();const s=o.getBoundingClientRect();let a,i;e.changedTouches&&e.changedTouches.length?(a=e.changedTouches[0].pageX-s.left,i=e.changedTouches[0].pageY-s.top):(a=e.clientX-s.left,i=e.clientY-s.top),v.set(a/s.width,1-i/s.height),w||(w=performance.now(),g.set(a,i));const y=a-g.x,W=i-g.y;g.set(a,i);const q=performance.now(),P=Math.max(10.4,q-w);w=q,c.x=y/P,c.y=W/P,c.needsUpdate=!0}function b(e){requestAnimationFrame(b),c.needsUpdate||(v.set(-1),c.set(0)),c.needsUpdate=!1,m.mouse.copy(v),m.velocity.lerp(c,c.len?.15:.1),m.update(),C.uniforms.uTime.value=e*.01,p.render({scene:z})}requestAnimationFrame(b)},l.complete&&l.onload()})});
