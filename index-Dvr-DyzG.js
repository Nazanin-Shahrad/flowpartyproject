(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const e of n)if(e.type==="childList")for(const l of e.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function h(n){const e={};return n.integrity&&(e.integrity=n.integrity),n.referrerPolicy&&(e.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?e.credentials="include":n.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function s(n){if(n.ep)return;n.ep=!0;const e=h(n);fetch(n.href,e)}})();const{Renderer:b,Vec2:v,Vec4:z,Geometry:M,Texture:P,Program:R,Mesh:j,Flowmap:I}=ogl,U=new Lenis;function N(c){U.raf(c),requestAnimationFrame(N)}requestAnimationFrame(N);async function q(c){return(await fetch(c)).text()}(async()=>{const c=await q("https://cdn.jsdelivr.net/gh/Nazanin-Shahrad/flowpartyproject/shaders/vertexShader.glsl"),d=await q("https://cdn.jsdelivr.net/gh/Nazanin-Shahrad/flowpartyproject/shaders/fragmentShader.glsl"),h=[2048,1638];document.querySelectorAll(".img").forEach(s=>{const n=new b({dpr:2}),e=n.gl,l=document.createElement("canvas");s.appendChild(l),s.appendChild(e.canvas);const w=new v(-1),i=new v;function y(){const t=s.getBoundingClientRect();e.canvas.width=t.width*2,e.canvas.height=t.height*2,e.canvas.style.width=`${t.width}px`,e.canvas.style.height=`${t.height}px`;const r=h[0]/h[1],o=t.width/t.height;let a,u;o>r?(a=r/o,u=1):(a=1,u=o/r),L.program.uniforms.res.value=new z(t.width,t.height,a,u),n.setSize(t.width,t.height),t.width/t.height}const f=new I(e,{falloff:.3,dissipation:.92,alpha:.5}),C=new M(e,{position:{size:2,data:new Float32Array([-1,-1,3,-1,-1,3])},uv:{size:2,data:new Float32Array([0,0,2,0,0,2])}}),x=new P(e,{minFilter:e.LINEAR,magFilter:e.LINEAR});x.image=s.querySelector("img");const A=new R(e,{vertex:c,fragment:d,uniforms:{uTime:{value:0},tWater:{value:x},res:{value:new z(window.innerWidth,window.innerHeight,1,1)},tFlow:f.uniform}}),L=new j(e,{geometry:C,program:A});window.addEventListener("resize",y,!1),y(),"ontouchstart"in window?(s.addEventListener("touchstart",g,!1),s.addEventListener("touchmove",g,{passive:!1})):s.addEventListener("mousemove",g,!1);let p;const m=new v;function g(t){t.preventDefault();const r=s.getBoundingClientRect();let o,a;t.changedTouches&&t.changedTouches.length?(o=t.changedTouches[0].pageX-r.left,a=t.changedTouches[0].pageY-r.top):(o=t.clientX-r.left,a=t.clientY-r.top),w.set(o/r.width,1-a/r.height),p||(p=performance.now(),m.set(o,a));const u=o-m.x,O=a-m.y;m.set(o,a);const S=performance.now(),T=Math.max(10.4,S-p);p=S,i.x=u/T,i.y=O/T,i.needsUpdate=!0}function F(t){requestAnimationFrame(F),i.needsUpdate||(w.set(-1),i.set(0)),i.needsUpdate=!1,f.mouse.copy(w),f.velocity.lerp(i,i.len?.15:.1),f.update(),A.uniforms.uTime.value=t*.01,n.render({scene:L})}requestAnimationFrame(F)})})();
