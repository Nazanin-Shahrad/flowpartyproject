(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))h(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&h(l)}).observe(document,{childList:!0,subtree:!0});function u(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function h(t){if(t.ep)return;t.ep=!0;const n=u(t);fetch(t.href,n)}})();window.addEventListener("DOMContentLoaded",async()=>{if(typeof Lenis>"u"){console.error("❌ Lenis is not defined. Please check your Lenis CDN script tag.");return}if(typeof ogl>"u"){console.error("❌ ogl is not defined. Please check your ogl CDN script tag.");return}const{Renderer:L,Vec2:d,Vec4:u,Geometry:h,Texture:t,Program:n,Mesh:l,Flowmap:M}=ogl,b=new Lenis;function x(o){b.raf(o),requestAnimationFrame(x)}requestAnimationFrame(x);async function A(o){return(await fetch(o)).text()}const R=await A("https://cdn.jsdelivr.net/gh/Nazanin-Shahrad/flowpartyproject/shaders/vertexShader.glsl"),j=await A("https://cdn.jsdelivr.net/gh/Nazanin-Shahrad/flowpartyproject/shaders/fragmentShader.glsl"),F=[2048,1638],S=document.querySelectorAll(".img");if(!S.length){console.warn("⚠️ No .img elements found on the page.");return}S.forEach(o=>{const f=new L({dpr:2}),s=f.gl,D=document.createElement("canvas");o.appendChild(D),o.appendChild(s.canvas);const v=new d(-1),c=new d,E=new h(s,{position:{size:2,data:new Float32Array([-1,-1,3,-1,-1,3])},uv:{size:2,data:new Float32Array([0,0,2,0,0,2])}}),N=new t(s,{minFilter:s.LINEAR,magFilter:s.LINEAR});N.image=o.querySelector("img");const p=new M(s,{falloff:.3,dissipation:.92,alpha:.5}),T=new n(s,{vertex:R,fragment:j,uniforms:{uTime:{value:0},tWater:{value:N},res:{value:new u(window.innerWidth,window.innerHeight,1,1)},tFlow:p.uniform}}),C=new l(s,{geometry:E,program:T});function z(){const e=o.getBoundingClientRect();s.canvas.width=e.width*2,s.canvas.height=e.height*2,s.canvas.style.width=`${e.width}px`,s.canvas.style.height=`${e.height}px`;const r=F[0]/F[1],a=e.width/e.height;let i=1,w=1;a>r?i=r/a:w=a/r,C.program.uniforms.res.value=new u(e.width,e.height,i,w),f.setSize(e.width,e.height),e.width/e.height}window.addEventListener("resize",z,!1),z(),"ontouchstart"in window?(o.addEventListener("touchstart",y,!1),o.addEventListener("touchmove",y,{passive:!1})):o.addEventListener("mousemove",y,!1);let g;const m=new d;function y(e){e.preventDefault();const r=o.getBoundingClientRect();let a,i;e.changedTouches&&e.changedTouches.length?(a=e.changedTouches[0].pageX-r.left,i=e.changedTouches[0].pageY-r.top):(a=e.clientX-r.left,i=e.clientY-r.top),v.set(a/r.width,1-i/r.height),g||(g=performance.now(),m.set(a,i));const w=a-m.x,I=i-m.y;m.set(a,i);const O=performance.now(),P=Math.max(10.4,O-g);g=O,c.x=w/P,c.y=I/P,c.needsUpdate=!0}function q(e){requestAnimationFrame(q),c.needsUpdate||(v.set(-1),c.set(0)),c.needsUpdate=!1,p.mouse.copy(v),p.velocity.lerp(c,c.len?.15:.1),p.update(),T.uniforms.uTime.value=e*.01,f.render({scene:C})}requestAnimationFrame(q)})});
