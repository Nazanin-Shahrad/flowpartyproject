(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))f(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const u of n.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&f(u)}).observe(document,{childList:!0,subtree:!0});function h(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function f(t){if(t.ep)return;t.ep=!0;const n=h(t);fetch(t.href,n)}})();window.addEventListener("DOMContentLoaded",async()=>{if(typeof Lenis>"u"||typeof ogl>"u"){console.error("Lenis or OGL is missing. Please check script imports.");return}const{Renderer:A,Vec2:l,Vec4:h,Geometry:f,Texture:t,Program:n,Mesh:u,Flowmap:P}=ogl,b=new Lenis;function F(r){b.raf(r),requestAnimationFrame(F)}requestAnimationFrame(F);async function S(r){return(await fetch(r)).text()}const R=await S("https://raw.githubusercontent.com/Nazanin-Shahrad/flowpartyproject/main/shaders/vertexShader.glsl"),C=await S("https://raw.githubusercontent.com/Nazanin-Shahrad/flowpartyproject/main/shaders/fragmentShader.glsl");document.querySelectorAll(".img").forEach(r=>{const i=r.querySelector("img");i.onload=()=>{const T=[i.naturalWidth||i.width||2048,i.naturalHeight||i.height||1638],y=new A({dpr:2}),o=y.gl;r.appendChild(o.canvas);const v=new l(-1),d=new l,E=new f(o,{position:{size:2,data:new Float32Array([-1,-1,3,-1,-1,3])},uv:{size:2,data:new Float32Array([0,0,2,0,0,2])}}),z=new t(o,{minFilter:o.LINEAR,magFilter:o.LINEAR});z.image=i;const p=new P(o,{falloff:.3,dissipation:.92,alpha:.5}),L=new n(o,{vertex:R,fragment:C,uniforms:{uTime:{value:0},tWater:{value:z},res:{value:new h(window.innerWidth,window.innerHeight,1,1)},tFlow:p.uniform}}),I=new u(o,{geometry:E,program:L});function O(){const e=r.getBoundingClientRect();o.canvas.width=e.width*2,o.canvas.height=e.height*2,o.canvas.style.width=`${e.width}px`,o.canvas.style.height=`${e.height}px`;const s=T[0]/T[1],a=e.width/e.height;let c=1,g=1;a>s?c=s/a:g=a/s,L.uniforms.res.value=new h(e.width,e.height,c,g),y.setSize(e.width,e.height)}window.addEventListener("resize",O,!1),O();const m=new l;let w;const x=e=>{e.preventDefault();const s=r.getBoundingClientRect();let a,c;e.changedTouches&&e.changedTouches.length?(a=e.changedTouches[0].pageX-s.left,c=e.changedTouches[0].pageY-s.top):(a=e.clientX-s.left,c=e.clientY-s.top),v.set(a/s.width,1-c/s.height),w||(w=performance.now(),m.set(a,c));const g=a-m.x,U=c-m.y;m.set(a,c);const N=performance.now(),M=Math.max(10.4,N-w);w=N,d.x=g/M,d.y=U/M,d.needsUpdate=!0};"ontouchstart"in window?(r.addEventListener("touchstart",x,!1),r.addEventListener("touchmove",x,{passive:!1})):r.addEventListener("mousemove",x,!1);function q(e){requestAnimationFrame(q),d.needsUpdate||(v.set(-1),d.set(0)),d.needsUpdate=!1,p.mouse.copy(v),p.velocity.lerp(d,d.len?.15:.1),p.update(),L.uniforms.uTime.value=e*.01,y.render({scene:I})}requestAnimationFrame(q)},i.complete&&i.onload()})});
